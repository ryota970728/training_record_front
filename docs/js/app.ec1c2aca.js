(function(){"use strict";var e={9448:function(e,t,r){var s=r(5471),i=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"app"}},[t("router-link",{attrs:{to:"/"}},[e._v("記録")]),e._v("| "),t("router-link",{attrs:{to:"confirm"}},[e._v("記録一覧")]),t("router-view")],1)},n=[],a={name:"App"},o=a,c=r(1656),u=(0,c.A)(o,i,n,!1,null,null,null),d=u.exports,l=r(4335),h=r(173),p=function(){var e=this,t=e._self._c;return t("div",{staticClass:"record-home"},[t("h1",[e._v("記録")]),t("div",{staticClass:"date"},[t("label",[e._v("日付：")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.createDate,expression:"createDate"}],attrs:{type:"date"},domProps:{value:e.createDate},on:{input:function(t){t.target.composing||(e.createDate=t.target.value)}}})]),e._l(e.recordLists,(function(r,s){return t("div",{key:s},[t("record-detail",{ref:"child",refInFor:!0,attrs:{createDate:e.createDate,partList:e.partList,menuList:e.menuList},on:{"update-array":e.handleArrayUpdate}})],1)})),e.recordLists.length>1?t("div",[t("button",{on:{click:e.deleteRecord}},[e._v("レコード削除")])]):e._e(),t("div",[t("button",{on:{click:e.addRecord}},[e._v("レコード追加")])]),t("div",[t("button",{on:{click:e.submitRecord}},[e._v("送信")])])],2)},m=[],f=(r(4114),r(8111),r(7588),r(1701),function(){var e=this,t=e._self._c;return t("div",[t("div",e._l(e.partList,(function(r){return t("label",{key:r.part_id},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.selectedPart,expression:"selectedPart"}],attrs:{type:"radio"},domProps:{value:r.part_id,checked:e._q(e.selectedPart,r.part_id)},on:{change:function(t){e.selectedPart=r.part_id}}}),e._v(" "+e._s(r.part_name)+" ")])})),0),t("div",[t("select",{directives:[{name:"model",rawName:"v-model",value:e.selectedMenu,expression:"selectedMenu"}],on:{change:function(t){var r=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.selectedMenu=t.target.multiple?r:r[0]}}},[t("option",{attrs:{disabled:"",value:""}},[e._v("選択してください")]),e._l(e.filteredMenuList,(function(r){return t("option",{key:r.menu_id,domProps:{value:r.menu_name}},[e._v(" "+e._s(r.menu_name)+" ")])}))],2)]),t("div",[t("label",[e._v("セット数：")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.setCount,expression:"setCount"}],staticClass:"set-count",attrs:{type:"number"},domProps:{value:e.setCount},on:{input:[function(t){t.target.composing||(e.setCount=t.target.value)},e.updateSets]}})]),e._l(e.setCountList,(function(r,s){return t("div",{key:s},[t("weight-sets",{ref:"child",refInFor:!0,on:{"update-weight":function(t){return e.updateWeight(t,s)},"update-reps":function(t){return e.updateReps(t,s)}}})],1)})),t("div",[t("label",[e._v("備考欄：")]),t("textarea",{directives:[{name:"model",rawName:"v-model",value:e.note,expression:"note"}],domProps:{value:e.note},on:{input:function(t){t.target.composing||(e.note=t.target.value)}}})])],2)}),v=[],_=(r(2489),function(){var e=this,t=e._self._c;return t("div",[t("div",[t("label",[t("input",{directives:[{name:"model",rawName:"v-model",value:e.weight,expression:"weight"}],staticClass:"weightBox",attrs:{type:"number"},domProps:{value:e.weight},on:{input:[function(t){t.target.composing||(e.weight=t.target.value)},e.updateWeight]}}),e._v("kg")]),t("label",[t("input",{directives:[{name:"model",rawName:"v-model",value:e.reps,expression:"reps"}],staticClass:"repsBox",attrs:{type:"number"},domProps:{value:e.reps},on:{input:[function(t){t.target.composing||(e.reps=t.target.value)},e.updateReps]}}),e._v("回")])])])}),g=[],w={name:"WeightSets",data(){return{weight:"",reps:""}},methods:{updateWeight(){this.$emit("update-weight",this.weight)},updateReps(){this.$emit("update-reps",this.reps)},validateInput(e){"sets"===e?this.sets=this.sets.replace(/[^0-9]/g,""):"weight"===e?this.weight=this.weight.replace(/[^0-9.]/g,""):"reps"===e&&(this.reps=this.reps.replace(/[^0-9]/g,""))},clearWeightSetslData(){this.weight="",this.reps=""}}},y=w,C=(0,c.A)(y,_,g,!1,null,"d3465458",null),L=C.exports,R={name:"RecordDetail",components:{WeightSets:L},props:{createDate:String,partList:Array,menuList:Array},data(){return{selectedPart:1,selectedMenu:"",setCount:3,setCountList:[],note:"",weightList:[],repsList:[]}},mounted(){this.updateSets()},watch:{selectedPart(){this.selectedMenu=""}},computed:{filteredMenuList(){return this.menuList.filter((e=>e.part_id===this.selectedPart))}},methods:{updateSets(){const e=Number(this.setCount);if(e>this.setCountList.length)for(let t=this.setCountList.length;t<e;t++)this.setCountList.push(t);else this.setCountList=this.setCountList.slice(0,e)},updateWeight(e,t){this.weightList[t]=e},updateReps(e,t){this.repsList[t]=e},setRecordDetailData(){if(!this.selectedMenu)return alert("種目を選択してください"),!0;if(!this.setCount||"0"===this.setCount)return alert("セット数を入力してください"),!0;for(let t=0;t<this.setCountList.length;t++)if(!this.weightList[t]||!this.repsList[t])return alert("重量と回数を入力してください"),!0;const e={partId:this.selectedPart,menuName:this.selectedMenu,setCount:this.setCount,weight:this.weightList,reps:this.repsList,createDate:this.createDate,note:this.note};this.$emit("update-array",e)},clearRecordDetailData(){this.selectedPart=1,this.selectedMenu="",this.setCount=3,this.note="",this.setCountList=[],this.weightList=[],this.repsList=[],this.updateSets(),this.$refs.child.forEach((e=>{e&&e.clearWeightSetslData&&e.clearWeightSetslData()}))}}},D=R,b=(0,c.A)(D,f,v,!1,null,"a2e7cdcc",null),O=b.exports;const A={GET_PART:"https://cnhgmlmnsmfvawxmcoai.supabase.co/functions/v1/training_record/fetchPart",GET_MENU:"https://cnhgmlmnsmfvawxmcoai.supabase.co/functions/v1/training_record/fetchMenu",POST_RECORD:"https://cnhgmlmnsmfvawxmcoai.supabase.co/functions/v1/training_record/insertRecord",GET_RECORDS:"https://cnhgmlmnsmfvawxmcoai.supabase.co/functions/v1/training_record/fetchRecords",AUTHORIZATION:"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZS1kZW1vIiwicm9sZSI6ImFub24iLCJleHAiOjE5ODM4MTI5OTZ9.CRXP1A7WOeoJeXxjNni43kdQwgnWNReilDMblYTn_I0"};var x={name:"RecordHome",components:{RecordDetail:O},data(){return{createDate:(new Date).toISOString().split("T")[0],recordLists:[1],formDataList:[],inputCheck:!1,partList:[],menuList:[]}},mounted(){this.fetchPart(),this.fetchMenu()},methods:{addRecord(){this.recordLists.push(this.recordLists.length+1)},deleteRecord(){this.recordLists.pop()},fetchPart(){0===this.partList.length&&this.$axios.get(A.GET_PART,{headers:{Authorization:A.AUTHORIZATION}}).then((e=>{this.partList=e.data})).catch((e=>{console.log(e)}))},fetchMenu(){0===this.menuList.length&&this.$axios.get(A.GET_MENU,{headers:{Authorization:A.AUTHORIZATION}}).then((e=>{this.menuList=e.data})).catch((e=>{console.log(e)}))},async submitRecord(){if(this.$refs.child.forEach((e=>{e&&e.setRecordDetailData&&(this.inputCheck=e.setRecordDetailData(),this.inputCheck)})),!this.inputCheck){for(const t of this.formDataList){let r=new FormData;r.append("record",JSON.stringify(t));try{const e=await this.$axios.post(A.POST_RECORD,r,{headers:{Authorization:A.AUTHORIZATION,"Content-Type":"application/json"}});console.log("success!",e.data)}catch(e){console.log(e),alert("送信失敗!")}}alert("送信成功!"),this.$refs.child.forEach((e=>{e&&e.clearRecordDetailData&&e.clearRecordDetailData()})),this.formDataList=[],this.inputCheck=!1}},handleArrayUpdate(e){this.formDataList.push(e)}}},k=x,T=(0,c.A)(k,p,m,!1,null,"048e3f6a",null),P=T.exports,I=function(){var e=this,t=e._self._c;return t("div",[t("h1",[e._v("記録一覧")]),e._l(e.sortedFilteredRecords,(function(r,s){return t("div",{key:s,staticClass:"record"},[t("div",{staticClass:"create-date"},[e._v(e._s(r.create_date)+" ("+e._s(e.getDayOffWeek(r.create_date))+")")]),e._l(r.records,(function(r){return t("div",{key:r.record_id,staticClass:"container"},[t("div",{staticClass:"part-name"},[e._v(e._s(r.part_name))]),t("div",{staticClass:"menu-name"},[e._v(e._s(r.menu_name))]),t("div",{staticClass:"set-detail"},e._l(r.set_detail,(function(r,s){return t("div",{key:s},[t("div",[e._v(e._s(r.weight)+" x "+e._s(r.reps))])])})),0)])}))],2)}))],2)},S=[],M=(r(8237),{name:"RecordConfirm",data(){return{recordList:[]}},mounted(){this.fetchRecords()},computed:{filteredRecords(){const e=this.recordList.reduce(((e,t)=>{const r=t.create_date;return e[r]||(e[r]=[]),e[r].push({record_id:t.record_id,menu_name:t.menu_master.menu_name,part_name:t.part_master.part_name,set_count:t.set_count,set_detail:t.set_detail}),e}),{});return Object.keys(e).map((t=>({create_date:t,records:e[t]})))},sortedFilteredRecords(){return this.filteredRecords.slice().sort(((e,t)=>new Date(t.create_date)-new Date(e.create_date)))}},methods:{fetchRecords(){this.$axios.get(A.GET_RECORDS,{headers:{Authorization:A.AUTHORIZATION}}).then((e=>{this.recordList=e.data})).catch((e=>{console.log(e)}))},getDayOffWeek(e){const t=new Date(e),r=["日","月","火","水","木","金","土"],s=t.getDay();return r[s]}}}),N=M,E=(0,c.A)(N,I,S,!1,null,"716eb387",null),W=E.exports;s.Ay.use(h.Ay);const j=[{path:"/",redirect:{name:"RecordHome"}},{path:"/record",name:"RecordHome",component:P},{path:"/confirm",name:"RecordConfirm",component:W}],$=new h.Ay({mode:"history",base:"/training_record_front/",routes:j});var U=$;s.Ay.config.productionTip=!1,s.Ay.prototype.$axios=l.A,new s.Ay({router:U,render:e=>e(d)}).$mount("#app")}},t={};function r(s){var i=t[s];if(void 0!==i)return i.exports;var n=t[s]={exports:{}};return e[s].call(n.exports,n,n.exports,r),n.exports}r.m=e,function(){var e=[];r.O=function(t,s,i,n){if(!s){var a=1/0;for(d=0;d<e.length;d++){s=e[d][0],i=e[d][1],n=e[d][2];for(var o=!0,c=0;c<s.length;c++)(!1&n||a>=n)&&Object.keys(r.O).every((function(e){return r.O[e](s[c])}))?s.splice(c--,1):(o=!1,n<a&&(a=n));if(o){e.splice(d--,1);var u=i();void 0!==u&&(t=u)}}return t}n=n||0;for(var d=e.length;d>0&&e[d-1][2]>n;d--)e[d]=e[d-1];e[d]=[s,i,n]}}(),function(){r.d=function(e,t){for(var s in t)r.o(t,s)&&!r.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})}}(),function(){r.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={524:0};r.O.j=function(t){return 0===e[t]};var t=function(t,s){var i,n,a=s[0],o=s[1],c=s[2],u=0;if(a.some((function(t){return 0!==e[t]}))){for(i in o)r.o(o,i)&&(r.m[i]=o[i]);if(c)var d=c(r)}for(t&&t(s);u<a.length;u++)n=a[u],r.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return r.O(d)},s=self["webpackChunkmuscle_training_front"]=self["webpackChunkmuscle_training_front"]||[];s.forEach(t.bind(null,0)),s.push=t.bind(null,s.push.bind(s))}();var s=r.O(void 0,[504],(function(){return r(9448)}));s=r.O(s)})();
//# sourceMappingURL=app.ec1c2aca.js.map